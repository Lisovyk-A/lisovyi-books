<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Читалка</title>
    <link href="https://fonts.googleapis.com/css2?family=Literata:opsz,wght@7..72,400;7..72,500;7..72,600&family=Onest:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/reader.css" />
</head>
<body>
    <!-- Мінімальний хедер — з'являється при наведенні вгору -->
    <header class="header" id="header">
        <a href="../index.html" class="back-link">← Назад</a>
        <h1 class="title" id="bookTitle">Завантаження...</h1>
        <div class="controls">
            <button class="ctrl-btn" id="downloadBtn" aria-label="Завантажити">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7,10 12,15 17,10"/><line x1="12" y1="15" x2="12" y2="3"/>
                </svg>
            </button>
            <button class="ctrl-btn" id="tocBtn" aria-label="Зміст">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="15" y2="18"/>
                </svg>
            </button>
            <button class="ctrl-btn" id="settingsBtn" aria-label="Налаштування">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/><path d="M12 1v4m0 14v4m11-11h-4M5 12H1m16.4-6.4-2.8 2.8M7.4 16.6l-2.8 2.8m12.8 0-2.8-2.8M7.4 7.4 4.6 4.6"/>
                </svg>
            </button>
        </div>
    </header>

    <!-- Прогрес — тонка лінія -->
    <div class="progress" id="progress"></div>

    <!-- Екран обкладинки -->
    <div class="cover-screen" id="coverScreen">
        <div class="cover-container">
            <img class="cover-image" id="coverImage" src="" alt="Обкладинка">
            <h1 class="cover-title" id="coverTitle">Завантаження...</h1>
            <p class="cover-author" id="coverAuthor"></p>
            <button class="cover-btn" id="startReadingBtn">
                <span>Почати читати</span>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9,18 15,12 9,6"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Основний контент -->
    <main class="main">
        <article class="chapter" id="chapter">
            <div class="loading" id="loading">
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
            </div>
        </article>

        <!-- Навігація внизу -->
        <nav class="nav" id="nav">
            <button class="nav-btn prev" id="prevBtn" disabled>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15,18 9,12 15,6"/>
                </svg>
            </button>
            <span class="nav-info" id="navInfo">1 / 1</span>
            <button class="nav-btn next" id="nextBtn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9,18 15,12 9,6"/>
                </svg>
            </button>
        </nav>
    </main>

    <!-- Зміст — overlay -->
    <div class="overlay" id="overlay"></div>
    
    <aside class="toc" id="toc">
        <div class="toc-header">
            <h2>Зміст</h2>
            <button class="close-btn" id="closeToc">×</button>
        </div>
        <div class="toc-list" id="tocList"></div>
    </aside>

    <!-- Налаштування — компактний popup -->
    <div class="settings" id="settings">
        <div class="setting-row">
            <span class="setting-label">Тема</span>
            <div class="toggle-group">
                <button class="toggle active" data-theme="dark">Темна</button>
                <button class="toggle" data-theme="light">Світла</button>
                <button class="toggle" data-theme="sepia">Сепія</button>
            </div>
        </div>
        <div class="setting-row">
            <span class="setting-label">Розмір</span>
            <div class="toggle-group font-toggles">
                <button class="toggle" data-size="s">A</button>
                <button class="toggle active" data-size="m">A</button>
                <button class="toggle" data-size="l">A</button>
            </div>
        </div>
    </div>

    <!-- Popup завантажень -->
    <div class="download-popup" id="downloadPopup">
        <div class="download-title">Отримати книгу</div>
        <a href="https://www.amazon.com/gp/product/B0FKMK8Z89/ref=x_gr_bb_kindle?caller=Goodreads&tag=x_gr_bb_kindle-20" target="_blank" rel="noopener" class="download-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
            </svg>
            <span>Amazon (Eng)</span>
            <svg class="external-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15,3 21,3 21,9"/><line x1="10" y1="14" x2="21" y2="3"/>
            </svg>
        </a>
        <a href="../downloads/rizdv_lisovyi.epub" download class="download-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
            </svg>
            <span>Завантажити EPUB</span>
        </a>
        <a href="../downloads/rizdv_lisovyi.pdf" download class="download-item">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14,2 14,8 20,8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>
            </svg>
            <span>Завантажити PDF</span>
        </a>
        <div class="download-divider"></div>
        <a href="#" class="download-item" id="copyrightBtn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/><path d="M14.5 9a3.5 3.5 0 1 0 0 6"/>
            </svg>
            <span>Ліцензія та авторські права</span>
        </a>
    </div>

    <!-- Модалка копірайту -->
    <div class="modal-overlay" id="copyrightModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Ліцензія та авторські права</h3>
                <button class="modal-close" id="closeCopyright">×</button>
            </div>
            <div class="modal-content" id="copyrightContent">
                <div class="loading">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/reader.js"></script>
</body>
</html>